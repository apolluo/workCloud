;/*2016-5-11 19:46:32*/!function(root,factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):root.bootbox=factory(root.jQuery)}(this,function init($,undefined){"use strict";function _t(key){
var locale=locales[defaults.locale];return locale?locale[key]:locales.en[key]}function processCallback(e,dialog,callback){e.stopPropagation(),e.preventDefault();var preserveDialog=$.isFunction(callback)&&callback.call(dialog,e)===!1;preserveDialog||dialog.modal("hide");
}function getKeyLength(obj){var k,t=0;for(k in obj)t++;return t}function each(collection,iterator){var index=0;$.each(collection,function(key,value){iterator(key,value,index++)})}function sanitize(options){var buttons,total;if("object"!=typeof options)throw new Error("Please supply an object of options");
if(!options.message)throw new Error("Please specify a message");return options=$.extend({},defaults,options),options.buttons||(options.buttons={}),buttons=options.buttons,total=getKeyLength(buttons),each(buttons,function(key,button,index){if($.isFunction(button)&&(button=buttons[key]={
callback:button}),"object"!==$.type(button))throw new Error("button with key "+key+" must be an object");button.label||(button.label=key),button.className||(2>=total&&index===total-1?button.className="btn-default":button.className="btn-primary")}),options}function mapArguments(args,properties){
for(var argn=args.length,options={},i=argn-1;i>=0;i--)options[properties[i]]=args[i];return options}function mergeArguments(defaults,args,properties){return $.extend(!0,{},defaults,mapArguments(args,properties))}function mergeDialogOptions(className,labels,properties,args){
var baseOptions={className:"bootbox-"+className,buttons:createLabels.apply(null,labels)};return validateButtons(mergeArguments(baseOptions,args,properties),labels)}function createLabels(){for(var buttons={},i=0,j=arguments.length;j>i;i++){var argument=arguments[i],key=argument.toLowerCase(),value=argument.toUpperCase();
buttons[key]={label:_t(value)}}return buttons}function validateButtons(options,buttons){var allowedButtons={};return each(buttons,function(key,value){allowedButtons[value]=!0}),each(options.buttons,function(key){if(allowedButtons[key]===undefined)throw new Error("button key "+key+" is not allowed (options are "+buttons.join("\n")+")");
}),options}function _MSG(){this.init.apply(this,arguments)}var templates={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",
header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",
inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",
select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",
time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"
},success:'<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><i class="glyphicon glyphicon-check"></i></div><div class="modal-title"></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-success" data-dismiss="modal">OK</button></div></div> </div> </div>'
},defaults={locale:"zh_CN",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},exports={};_MSG.prototype={init:function(opt){var defaults={hideAfter:1e4,position:"msg-on-rb",container:$("body"),type:"success",showCloseButton:!0,
closeButtonText:"&times;",autoHide:!0},options=$.extend({},defaults,opt);if($("ul."+options.position).size()<=0)var $ul=$('<ul class="bootbox-messenger '+options.position+'"></ul>').appendTo(options.container);else $ul=$("ul."+options.position);if(this.$msgItem=$('<li class="alert alert-'+options.type+'"><strong class="pull-left">'+options.msg+"</strong></li>"),
options.showCloseButton&&1!=options.autoHide){var $cancel=$('<button type="button" class="bootbox-close-button close messenger-close">');$cancel.html(options.closeButtonText);$cancel.on("click",$.proxy(this.hidemsg,this)),this.$msgItem.append($cancel)}this.$msgItem.hide().appendTo($ul).slideDown(),
options.autoHide&&setTimeout($.proxy(this.hidemsg,this),options.hideAfter)},hidemsg:function(){this.$msgItem.slideUp()}},exports.msg=function(o){new _MSG(o)},exports.info=function(msg,callback,autohide){var options={message:msg,title:'<i class="glyphicon glyphicon-envelope"></i>',
className:"modal-info",size:"small",closeButton:!1,buttons:{info:{label:"\u786e\u5b9a",className:"btn-info",callback:callback}}};exports.dialog(options),autohide&&"number"==typeof autohide&&setTimeout(exports.hideAll,autohide)},exports.warning=function(msg,callback){
var options={message:msg,title:'<i class="glyphicon glyphicon-warning-sign"></i>',className:"modal-warning",size:"small",closeButton:!1,buttons:{warning:{label:"\u786e\u5b9a",className:"btn-warning",callback:callback}}};return exports.dialog(options)},exports.danger=function(msg,callback){
var options={message:msg,title:'<i class="glyphicon glyphicon-ban-circle"></i>',className:"modal-danger",size:"small",closeButton:!1,buttons:{danger:{label:"\u786e\u5b9a",className:"btn-danger",callback:callback}}};return exports.dialog(options)},exports.success=function(msg,callback){
var options={message:msg,title:'<i class="glyphicon glyphicon-ok"></i>',className:"modal-success",size:"small",closeButton:!1,buttons:{success:{label:"\u786e\u5b9a",className:"btn-success",callback:callback}}};return exports.dialog(options)},exports.loading=function(){
var options;return options={message:'<i class="glyphicon glyphicon-refresh"></i>'+(arguments[0]||"loading..."),className:"loading",closeButton:!1,size:"small"},exports.dialog(options)},exports.alert=function(){var options;if(options=mergeDialogOptions("alert",["ok"],["message","callback"],arguments),
options.callback&&!$.isFunction(options.callback))throw new Error("alert requires callback property to be a function when provided");return options.buttons.ok.callback=options.onEscape=function(){return $.isFunction(options.callback)?options.callback.call(this):!0;
},exports.dialog(options)},exports.confirm=function(){var options;if(options=mergeDialogOptions("confirm",["confirm","cancel"],["message","callback"],arguments),$.extend(options,{size:"small"}),options.buttons.cancel.callback=options.onEscape=function(){return options.callback.call(this,!1);
},options.buttons.confirm.callback=function(){return options.callback.call(this,!0)},!$.isFunction(options.callback))throw new Error("confirm requires a callback");return exports.dialog(options)},exports.prompt=function(){var options,defaults,dialog,form,input,shouldShow,inputOptions;
if(form=$(templates.form),defaults={className:"bootbox-prompt",buttons:createLabels("confirm","cancel"),value:"",inputType:"text"},options=validateButtons(mergeArguments(defaults,arguments,["title","callback"]),["confirm","cancel"]),shouldShow=options.show===undefined?!0:options.show,
options.message=form,options.buttons.cancel.callback=options.onEscape=function(){return options.callback.call(this,null)},options.buttons.confirm.callback=function(){var value;switch(options.inputType){case"text":case"textarea":case"email":case"select":case"date":
case"time":case"number":case"password":value=input.val();break;case"checkbox":var checkedItems=input.find("input:checked");value=[],each(checkedItems,function(_,item){value.push($(item).val())})}return options.callback.call(this,value)},options.show=!1,!options.title)throw new Error("prompt requires a title");
if(!$.isFunction(options.callback))throw new Error("prompt requires a callback");if(!templates.inputs[options.inputType])throw new Error("invalid prompt type");switch(input=$(templates.inputs[options.inputType]),options.inputType){case"text":case"textarea":
case"email":case"date":case"time":case"number":case"password":input.val(options.value);break;case"select":var groups={};if(inputOptions=options.inputOptions||[],!$.isArray(inputOptions))throw new Error("Please pass an array of input options");if(!inputOptions.length)throw new Error("prompt with select requires options");
each(inputOptions,function(_,option){var elem=input;if(option.value===undefined||option.text===undefined)throw new Error("given options in wrong format");option.group&&(groups[option.group]||(groups[option.group]=$("<optgroup/>").attr("label",option.group)),
elem=groups[option.group]),elem.append("<option value='"+option.value+"'>"+option.text+"</option>")}),each(groups,function(_,group){input.append(group)}),input.val(options.value);break;case"checkbox":var values=$.isArray(options.value)?options.value:[options.value];
if(inputOptions=options.inputOptions||[],!inputOptions.length)throw new Error("prompt with checkbox requires options");if(!inputOptions[0].value||!inputOptions[0].text)throw new Error("given options in wrong format");input=$("<div/>"),each(inputOptions,function(_,option){
var checkbox=$(templates.inputs[options.inputType]);checkbox.find("input").attr("value",option.value),checkbox.find("label").append(option.text),each(values,function(_,value){value===option.value&&checkbox.find("input").prop("checked",!0)}),input.append(checkbox);
})}return options.placeholder&&input.attr("placeholder",options.placeholder),options.pattern&&input.attr("pattern",options.pattern),options.maxlength&&input.attr("maxlength",options.maxlength),form.append(input),form.on("submit",function(e){e.preventDefault(),
e.stopPropagation(),dialog.find(".btn-primary").click()}),dialog=exports.dialog(options),dialog.off("shown.bs.modal"),dialog.on("shown.bs.modal",function(){input.focus()}),shouldShow===!0&&dialog.modal("show"),dialog},exports.dialog=function(options){if(!$(".bootbox").size()){
options=sanitize(options);var dialog=$(templates.dialog),innerDialog=dialog.find(".modal-dialog"),body=dialog.find(".modal-body"),buttons=options.buttons,buttonStr="",callbacks={onEscape:options.onEscape};if($.fn.modal===undefined)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");
if(each(buttons,function(key,button){buttonStr+="<button data-bb-handler='"+key+"' type='button' class='btn "+button.className+"'>"+button.label+"</button>",callbacks[key]=button.callback}),body.find(".bootbox-body").html(options.message),options.animate===!0&&dialog.addClass("fade"),
options.formRb===!0&&(dialog.addClass("fade"),dialog.addClass("formRb animated slideInUp")),options.className&&dialog.addClass(options.className),"large"===options.size?innerDialog.addClass("modal-lg"):"small"===options.size&&innerDialog.addClass("modal-sm"),
options.title&&body.before(templates.header),options.closeButton){var closeButton=$(templates.closeButton);options.title?dialog.find(".modal-header").prepend(closeButton):closeButton.css("margin-top","-10px").prependTo(body)}return options.title&&dialog.find(".modal-title").html(options.title),
buttonStr.length&&(body.after(templates.footer),dialog.find(".modal-footer").html(buttonStr)),dialog.on("hidden.bs.modal",function(e){e.target===this&&dialog.remove()}),dialog.on("show.bs.modal",function(){options.backdrop&&dialog.next(".modal-backdrop").addClass("bootbox-backdrop");
}),dialog.on("shown.bs.modal",function(){}),"static"!==options.backdrop&&dialog.on("click.dismiss.bs.modal",function(e){dialog.children(".modal-backdrop").length&&(e.currentTarget=dialog.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&dialog.trigger("escape.close.bb");
}),dialog.on("escape.close.bb",function(e){callbacks.onEscape&&processCallback(e,dialog,callbacks.onEscape)}),dialog.on("click",".modal-footer button",function(e){var callbackKey=$(this).data("bb-handler");processCallback(e,dialog,callbacks[callbackKey])}),
dialog.on("click",".bootbox-close-button",function(e){processCallback(e,dialog,callbacks.onEscape)}),dialog.on("keyup",function(e){27===e.which&&dialog.trigger("escape.close.bb")}),$(options.container).append(dialog),dialog.modal({backdrop:options.backdrop?"static":!1,
keyboard:!1,show:!1}),options.show&&dialog.modal("show"),dialog}},exports.setDefaults=function(){var values={};2===arguments.length?values[arguments[0]]=arguments[1]:values=arguments[0],$.extend(defaults,values)},exports.hideAll=function(){return $(".bootbox").modal("hide"),
exports};var locales={zh_CN:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u786e\u8ba4"}};return exports.addLocale=function(name,values){return $.each(["OK","CANCEL","CONFIRM"],function(_,v){if(!values[v])throw new Error("Please supply a translation for '"+v+"'");
}),locales[name]={OK:values.OK,CANCEL:values.CANCEL,CONFIRM:values.CONFIRM},exports},exports.removeLocale=function(name){return delete locales[name],exports},exports.setLocale=function(name){return exports.setDefaults("locale",name)},exports.init=function(_$){
return init(_$||$)},exports});