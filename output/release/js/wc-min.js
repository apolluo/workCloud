;/*2016-5-11 19:46:32*/!function(global,factory){factory(global)}(window,function(window,noGlobal){const PLUGIN_DIR="./plugin/node_modules/";var verson="0.1.0",wc=function(){return new wc.fn.init};wc.fn=wc.prototype={verson:verson,constructor:wc};var init=wc.fn.init=function(){};init.prototype=wc.fn,
wc.extend=wc.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),
i===length&&(target=this,i--);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},
target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},wc.extend({getLocalData:function(name){return localStorage?localStorage[name]:void 0},setLocalData:function(name,value){localStorage&&(localStorage[name]=value)},
cmd:require(PLUGIN_DIR+"wc-cmd"),buildJs:require(PLUGIN_DIR+"wc-build").buildJs,plugin:require(PLUGIN_DIR+"wc-plugin")}),window.wc=global.wc=wc}),wc.extend({scroll:function(selector){selector=0==selector.indexOf("#")?selector:"#"+selector,$(selector).niceScroll({
cursorcolor:"#ccc",cursorwidth:"10px",cursorminheight:32})},loading:function(){bootbox.loading("\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019...")},showDir:function(data,id){var _list=id||"#currentProj";$(_list).children().length>0?($(_list).jstree(!0).settings.core.data=data,
$(_list).jstree(!0).refresh()):$(_list).jstree({core:{check_callback:!0,data:[data]}}),$(_list).css("max-height",parseInt($(_list).parent().css("max-height"))-25),wc.scroll(_list)},log:function(msg){if(msg){var _txt="";switch(_txt=msg.hasOwnProperty("txt")?$.isArray(msg.txt)?msg.txt.join(" "):$.isPlainObject(msg.txt)?JSON.stringify(msg.txt):$.isFunction(msg.txt)?msg.txt():msg.txt:[].slice.call(arguments).join(" "),
msg.state){case"start":bootbox.dialog({message:'<ul id="wc_log_txt" style="max-height:250px;overflow-y:scroll;"><li class="text-info"><b>'+_txt+"</b></li></ul>",title:"\u6d88\u606f\u63d0\u9192",className:"wc_log",formRb:!0,backdrop:!1});break;case"end":setTimeout(function(){
$(".wc_log").modal("hide")},3e3);break;case"loading":_txt+="...";case"run":_txt="run"==msg.state?"<b>"+_txt+"</b>":_txt,_txt+="success"==msg.type?"<hr/>":"";default:var _class="";switch(msg.type){case"error":_class="danger";break;case"warn":_class="warning";
break;default:_class=msg.type||"default"}setTimeout(function(){$("#wc_log_txt").append('<li class="text-'+_class+' ">'+_txt+"</li>"),$("#wc_log_txt").scrollTop($("#wc_log_txt")[0].scrollHeight)},500)}}},alert:function(option){var _dialog=$("#alert");$.isPlainObject(option)?option.id&&(_dialog=$("#"+option.id)):$("#alert >.text").html(option),
_dialog.dialog({autoOpen:!0,title:option.title||"\u53cb\u60c5\u63d0\u793a",width:option.width||400,buttons:option.buttons||[],modal:!0,show:option.show||{effect:"blind",duration:300},hide:option.hide||{effect:"explode",duration:300}})},modal:function(){var templates={
dialog:"<div class='modal fade' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",
footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",success:'<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><i class="glyphicon glyphicon-check"></i></div><div class="modal-title"></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-success" data-dismiss="modal">OK</button></div></div> </div> </div>'
},queue={},component=function(options){this.options=options};component.prototype.__defineSetter__("options",function(options){if(options.id){if(!queue[options.id]){this.id=options.id,this.template=$(templates.dialog),this.template.attr("id",options.id);var body=this.template.find(".modal-body");
"string"==typeof options.message?body.find(".bootbox-body").html(options.message):body.find(".bootbox-body").append(options.message),options.title&&(body.before(templates.header),this.template.find(".modal-title").html(options.title));options.buttons;if(options.closeButton){
var closeButton=$(templates.closeButton);options.title?this.template.find(".modal-header").prepend(closeButton):closeButton.css("margin-top","-10px").prependTo(body)}$("body").append(this.template),queue[options.id]={target:this.template,isInit:!0}}$("#"+options.id).modal("show");
}});var dialog=function(options){return options.hasOwnProperty("closeButton")&&options.closeButton===!1||(options.closeButton=!0),new component(options)};return{dialog:dialog,hideAll:function(){$(".modal").modal("hide")}}}()}),wc.extend({file:function(){var fs=require("fs"),readDir=function(path,callback,showType){
var data={text:path,state:{opened:!0},children:[]},fs_dir_promise=require("fs-readdir-promise");fs_dir_promise(path).then(function(files){if(!files.length)return console.log(" No files to show!");var i=0;files.forEach(function(file){fs.stat(path+"/"+file,function(err,stat){
err||("all"==showType?stat.isDirectory()&&readDir(path+"/"+file):stat.isDirectory()&&data.children.push({text:file}),i++,i==files.length&&callback&&callback(data))})})})};return{readDir:readDir}}()});var myFile=function(){var fs=require("fs"),readDir=function(path,callback,showType){
var data={text:path,state:{opened:!0},children:[]};return fs.readdir(path,function(err,files){if(!err){if(!files.length)return console.log(" [31m No files to show![39m\n");var i=0;files.forEach(function(file){fs.stat(path+"/"+file,function(err,stat){err||("all"==showType?stat.isDirectory()&&readDir(path+"/"+file):stat.isDirectory()&&data.children.push({
text:file}),i++,i==files.length&&callback&&callback(data))})})}}),data},readDir2=function(path,callback,showType){var data={text:path,state:{opened:!0},children:[]},fs_dir_promise=require("fs-readdir-promise");fs_dir_promise(path).then(function(files){if(!files.length)return console.log(" [31m No files to show![39m\n");
var i=0;files.forEach(function(file){fs.stat(path+"/"+file,function(err,stat){err||("all"==showType?stat.isDirectory()&&readDir(path+"/"+file):stat.isDirectory()&&data.children.push({text:file}),i++,i==files.length&&callback&&callback(data))})})})};return{readDir:readDir2
}}();