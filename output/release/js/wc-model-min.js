;/*2016-5-12 16:26:54*/var Sequelize=require("sequelize"),sequelize=require("./sequelize"),Config=sequelize.define("Config",{name:Sequelize.STRING,type:Sequelize.STRING,configFile:Sequelize.TEXT,cmdStr:Sequelize.TEXT,info:Sequelize.TEXT,prj:Sequelize.STRING},{tableName:"config"});
Config.sync().then(function(){})["catch"](function(){}),Config.getConfig=function(prj,callback){Config.findAll({where:{prj:prj}}).then(function(config){callback("success",config)}),Config.modify=function(data,callback){Config.update({name:data[0],type:data[1],
configFile:data[2],cmdStr:data[3],info:data[4],prj:data[5]},{where:{id:data[6]}}).then(function(config){callback("update success",config)})},Config.save=function(data,callback){Config.create({name:data[0],type:data[1],configFile:data[2],cmdStr:data[3],info:data[4],
prj:data[5]}).then(function(config){callback("success",config.toJSON())})},Config["delete"]=function(option,callback){Config.destroy({where:"object"==typeof option?option:{id:option}}).then(function(config){callback("success",config)})["catch"](function(err){});
}},module.exports=Config;var mysql=require("mysql"),config=require("../config"),pool=mysql.createPool(config.db);module.exports=pool;var Sequelize=require("sequelize"),sequelize=require("./sequelize"),Projs={};Projs=sequelize.define("Projs",{name:{type:Sequelize.STRING,
primaryKey:!0,unique:!0,comment:"\u9879\u76ee\u540d"},src:{type:Sequelize.TEXT},info:{type:Sequelize.TEXT,allowNull:!0},config:{type:Sequelize.TEXT,defaultValue:""},createTime:{type:Sequelize.DATE,defaultValue:Sequelize.NOW}},{tableName:"projs"}),Projs.sync().then(function(){})["catch"](function(error){}),
Projs.getProj=function(name,callback){name?Projs.findOne({where:{name:name}}).then(function(projs){callback("success",projs)})["catch"](function(error){callback("fail",error)}):Projs.findAll().then(function(projs){callback("success",projs)})["catch"](function(error){
callback("fail",error)})},Projs.save=function(data,callback){Projs.create({name:data[0],src:data[1],info:data[2]}).then(function(projs){callback("success",projs)})["catch"](function(error){callback("fail",error)})},Projs.modify=function(data,callback){Projs.update({
name:data[0],src:data[1],info:data[2]},{where:{name:data[3]}}).then(function(projs){callback("success",projs)})["catch"](function(error){callback("fail",error)})},Projs["delete"]=function(name,callback){Projs.destroy({where:{name:name}}).then(function(data){
callback(data)})["catch"](function(err){})},module.exports=Projs;var Sequelize=require("sequelize"),config=require("../config"),db=config.db,sequelize=new Sequelize(db.database,db.user,db.password,{host:db.host,dialect:"mysql",storage:"data/workCloud.db"});module.exports=sequelize;